<!doctype html>
<html xmlns="http://www.w3.org/1999/html">
<head>
<title>Forsikring - storebrand.no</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="css/stb-main.css">

<script type="text/javascript" src="js/dist/jquery.min.js"></script>
<script type="text/javascript" src="js/dist/moment.min.js"></script>
<script type="text/javascript" src="js/dist/bootstrap.min.js"></script>
<script type="text/javascript" src="js/dist/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="js/dist/bootstrap-datetimepicker.nb.js"></script>
<script type="text/javascript" src="js/dist/chosen.jquery.js"></script>
<script type="text/javascript" src="js/dist/jquery-ui-1.10.3.datepicker.js"></script>
<script type="text/javascript" src="js/dist/jquery.slider.all.js"></script>
<script type="text/javascript" src="js/dist/custom-select-menu.jquery.js"></script>
<script type="text/javascript" src="js/dist/bootstrapValidator.js"></script>

<!-- Opplegg for sticky toppmeny -->
<style>
  /* Bootstrap 3 helpers */
.navbar-form input, .form-inline input {
  width:auto;
}

header {
  height:50px;
}

#nav.affix {
  position: fixed;
  top: 0;
  width: 100%;
  z-index:999;
}

.stb-form-group.alarm input,
.stb-form-group.alarm textarea{
  background-color: #FFF0F0;
  border-color: #FFB3B3;
  color: #000000;
}

.stb-form-group.valid input,
.stb-form-group.valid textarea{
  background-color: #ECF2C2;
  border-color: #819F2B;
  color: #000000;
}

.errorMsg{
  display:none;
  color:#DA291C;
}

.bv-form .help-block {
  margin-bottom: 6px;
  font-size: 15px;
}

.nav-tabs li.bv-tab-success > a {
  color: #3c763d;
}
.nav-tabs li.bv-tab-error > a {
  color: #a94442;
}

  /* Override feedback icon position */
form .has-feedback .input-group .form-control-feedback {
  top: 0;
  right: -30px;
}

form .has-feedback.input-group i.glyphicon-remove  {
  top: 25px !important;
  right: -30px;
}
form .has-feedback.input-group i.glyphicon-ok {
  top: 5px !important;
  right: -30px;
}

form .has-feedback.text-area i.glyphicon-remove {
  top: 20px !important;
}

form .has-feedback.select i.glyphicon-remove{
  top: 40% !important;
  left: 32%;
}
form .has-feedback.select i.glyphicon-ok{
  left: 32%;
}

form .has-feedback.checkbox i.glyphicon-ok{
  top: 0;
}

form .has-feedback.checkbox i.glyphicon-remove{
  top: 40%;
}
.select select{
  width: 30%;
}

.input-group.date{
  width: 70%;
}

p{
  margin-top: 6px;
}

a{
  cursor: pointer;
}


.hiddenfile {
  width: 0px;
  height: 0px;
  overflow: hidden;
}

label{
  margin-bottom: 6px;
}
.stb-form-group{
  margin-bottom: 24px !important;
}

.stepPanel{
  margin: 48px 0 48px 0;
  display:none;
}
.stepPanel.active{
  display:block;
}

.stb-input-group-lg{
  width: 90%;
}
.stb-input-group-md{
  width: 80%;
}
.stb-input-group-sm{
  width: 50%;
}


#skademelding .add-btn,#skademelding .update-btn{
  margin-top: 12px;
  margin-bottom: 12px;
  padding-top: 6px ;
  background: transparent;
  border-style:solid;
  border-width:1px;
  color: #000000;
}
.transparent-btn{
  margin-right: 48px;
  padding-top: 6px !important;
  background: transparent !important;
  border-style:solid;
  border-width:1px;
  color: #000000;
}

.transparent-btn:hover{
  background: #000000 !important;
  color: white !important;
}

#skademelding .add-btn:hover{
  background: #000000;
  color: white;
}


#skademelding .cancel-btn{
  margin-right:48px;
  margin-top: 12px;
  background: transparent;
  color: #000000;
}

#skademelding .cancel-btn:hover{
  color: #DA291C;
}

.summary{
  margin-top: 24px;
}

table.stb-table {
  table-layout: fixed;
  word-wrap: break-word;
}

h4.panel-title{
 color: #BF1D19;
}
.panel-heading{
  background-color: white !important;
  padding: 1px 15px;
}
.panel-body{
  background-color: #EFE8DF;
}


</style>
<script type="text/javascript">

function validateEmptyString(objektet){

  var innhold=objektet.val();
  if(innhold=='' | innhold==null){
    objektet.parent().removeClass('valid');
    objektet.parent().addClass('alarm');
    objektet.prev().show();
  }
  else{
    objektet.parent().removeClass('alarm');
    objektet.parent().addClass('valid');
    objektet.prev().hide();
  }
}

/* Verify National Identity Number ***********************************************/
function verifyID(nr) {
  var pn = new Array();
  var v1 = new Array(3,7,6,1,8,9,4,5,2,1,0);
  var v2 = new Array(5,4,3,2,7,6,5,4,3,2,1);
  for(var i=0; i<nr.length; i++) {
    pn[i] = nr.charAt(i);
  }
  var k1=0;
  for(var i=0; i<v1.length; i++) {
    k1 += pn[i]*v1[i];
  }
  var k2=0;
  for(var i=0; i<v2.length; i++) {
    k2 += pn[i]*v2[i];
  }
  if (k1%11==0 && k2%11==0 ) {
    return true;
  } else {
    return false;
  }
}

$(document).ready(function(){

  /* Norwegian initialisation for the jQuery UI date picker plugin. */
  /* Written by Naimdjon Takhirov (naimdjon@gmail.com). */
  $.datepicker.regional.no = {
    closeText: 'Lukk',
    prevText: '&laquo;',
    nextText: '&raquo;',
    currentText: 'I dag',
    monthNames: ['Januar','Februar','Mars','April','Mai','Juni', 'Juli','August','September','Oktober','November','Desember'],
    monthNamesShort: ['Jan','Feb','Mar','Apr','Mai','Jun','Jul','Aug','Sep','Okt','Nov','Des'],
    dayNamesShort: ['Søn','Man','Tir','Ons','Tor','Fre','Lør'],
    dayNames: ['Søndag','Mandag','Tirsdag','Onsdag','Torsdag','Fredag','Lørdag'],
    dayNamesMin: ['Sø','Ma','Ti','On','To','Fr','Lø'],
    weekHeader: 'Uke',
    dateFormat: 'dd.mm.yy',
    firstDay: 1,
    isRTL: false,
    showMonthAfterYear: false,
    yearSuffix: ''
  };
  $.datepicker.setDefaults($.datepicker.regional.no);

  $('input[data-widget=stb-datepicker]').datepicker().children().show();


  $('.stb-radio').change(function() {

    if($('input:radio[name=travel]:checked').val()=="Leisure"){
      $('#travelBusinessForm').slideUp();
    }
    else{
      $('#travelBusinessForm').slideDown();
    }

    if($('input:radio[name=creditInsurance]:checked').val()=="Yes"){
      $('#creditInsuranceInfo').slideDown();
    }else{
      $('#creditInsuranceInfo').slideUp();
    }

    if($('input:radio[name=damagesLately]:checked').val()=="Yes"){
      $('#insurancePayment').slideDown();
    }else{
      $('#insurancePayment').slideUp();
    }

    if($('input:radio[name=itemRepairable]:checked').val()=="Yes"){
      $('#repairItem').slideDown();
    }else{
      $('#repairItem').slideUp();
    }
    //if($('#leisure:checked').val()=='Yes')

  });

  $('.datePicker').datetimepicker();

  var dateValidator = {
    message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Verdien er ikke en gyldig dato.',
    callback: function(value,validator){
      var m = new moment(value, 'DD.MM.YYYY', true);
      return m.isValid();
    }
  };
  var idValidator = {
    message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Fødselsnummeret er ikke gyldig!',
    callback: function(value, validor){
      return verifyID(value);
    }
  };

  var omTapetFields = {
    loss: {
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi om stjålet eller skadet!'
        }
      }
    },
    dateWhen: {
      trigger: 'blur',
      container: '.info-message',
      message: 'Oppgi en dato for når skaden inntraff',
      validators: {
        callback: dateValidator
      }
    },
    lostCountry:{
      trigger: 'blur',
      container: '.info-message',
      message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi hvilket land skaden inntraff!',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>Oppgi hvilket land skaden inntraff!'
        }
      }
    },
    lostPlace:{
      trigger: 'blur',
      container: '.info-message',
      message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi hvilket sted skaden inntraff!',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi hvilket sted skaden inntraff!'
        }
      }
    },
    lostHow:{
      trigger: 'blur',
      container: '.info-message',
      message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppi på hvilken måte tapet kan ha skjedd!',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppi på hvilken måte tapet kan ha skjedd!'
        }
      }
    },
    lostActivities:{
      trigger: 'blur',
      container: '.info-message',
      message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppi sted når skaden skjedde og aktivitet!',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppi sted når skaden skjedde og aktivitet!'
        }
      }
    },

    lostEvents:{
      trigger: 'blur',
      container: '.info-message',
      message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Svar på dette eller legge inn Nei som svar!',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Svar på dette eller legge inn Nei som svar!'
        }
      }
    },
    lossWitness: {
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi om det var utenforstående vitne(r) til hendelsen!'
        }
      }
    },
    safeKeeping:{
      trigger: 'blur',
      container: '.info-message',
      message: '<span class="glyphicon glyphicon-exclamation-sign"></span>Oppgi varighet av oppbevaring!',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>Oppgi varighet av oppbevaring!'
        }
      }
    },
    otherInfo:{
      trigger: 'blur',
      container: '.info-message',
      message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi hvor skaden inntraff!',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi hvor skaden inntraff!'
        }
      }
    }
  };
  var taptGjenstandFields = {
    lostItemType: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi merke og modell!'
        }
      }

    },
    howOld:{
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi hvor gammel gjenstanden er!'
        }
      }
    },
    purchasedWhere: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi hvor gjenstanden ble kjøpt!'
        }
      }
    },
    itemNew:{
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi om gjenstanden var ny ved anskaffelse'
        }
      }
    },
    itemRepairable:{
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Oppgi om gjenstanden kan repareres'
        }
      }
    }

  }
  var omReisenFields = {

    dateTravelTo: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        callback: dateValidator,
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi en dato for reise'
        }
      }

    },
    dateTravelFrom: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        callback: dateValidator,
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi en dato for hjemreise'
        }
      }
    },
    organizator: {
      trigger: 'blur',
      container: '.info-message',
      message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi arrangørens navn ved charterreiser, eller navn på flyselskap!',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi arrangørens navn ved charterreiser, eller navn på flyselskap!'
        }
      }
    },
    creditInsurance:{
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi om du har betalt reisen med et kort som inkluderer reiseforsikring!'
        }
      }

    },
    damagesLately:{
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi om du har tidligere (siste 3 år) hatt skader som har medført forsikringsutbetaling!'
        }
      }
    },
    cardOwner:{
      trigger: 'blur',
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi kortholder!'
        }
      }
    },
    cardNumber:{
      trigger: 'blur',
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi kort nummer!'
        },
        creditCard: {
          message: 'Kortnummeret er ikke gyldig'
        }
      }
    },
    damageReport:{
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi om skaden er meldt dit!'
        }
      }
    },

    refund:{
      trigger: 'blur',
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi om du har motatt erstatning!'
        }
      }
    }
  };
  var personOpplysningerFields = {
    birthNumber: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        callback: idValidator
      }

    },
    firstNamePerson: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi et fornavn!'
        }
      }

    },
    lastNamePerson: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi et etternavn!'
        }
      }

    },
    emailPerson: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        emailAddress: {
          message: 'Dette er ikke en gyldig email adresse'
        },
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi en email!'
        }
      }

    },
    reEmailPerson: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        emailAddress: {
          message: 'Dette er ikke en gyldig email adresse'
        },
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Gjenta email!'
        },
        identical: {
          field: 'emailPerson',
          message: 'Email feltene er ulike.'
        }
      }

    },
    telephonePerson: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        stringLength: {
          min: 8,
          max: 8,
          message: 'Telefonnummer må bestå av 8 siffer.'
        },
        digits:{
          message: 'Telefonnummer kan kun bestå av heltall.'
        },
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi et telefonnummer!'
        }
      }

    },
    bankAccount: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        stringLength: {
          min: 11,
          max: 11,
          message: 'Kontonummer må bestå av 11 siffer.'
        },
        digits:{
          message: 'Kontonummer kan kun bestå av heltall.'
        },
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi et kontonummer!'
        }
      }

    },
    poliseNumber: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        stringLength: {
          min: 7,
          max: 7,
          message: 'Polisenummer må bestå av 7 siffer.'
        },
        digits:{
          message: 'Polisenummer kan kun bestå av heltall.'
        },
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span>  Oppgi et polisenummer!'
        }
      }

    },
    birthNumberTable: {
      trigger: 'blur',
      container: '.info-message',
      validators: {
        trigger: 'blur',
        container: '.info-message',
        validators: {
          callback: idValidator
        }
      }
    }
  };

  var oppsummeringFields ={
    confirm:{
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Du må bekrefte for å kunne sende inn sjema.'
        }
      }
    },
    acceptEmail:{
      threshold: 3,
      container: '.info-message',
      validators: {
        notEmpty: {
          message: '<span class="glyphicon glyphicon-exclamation-sign"></span> Du må godkjenne for å kunne sende inn sjema.'
        }
      }
    }
  }

  var validationFields = $.extend({}, omTapetFields, taptGjenstandFields, omReisenFields, personOpplysningerFields, oppsummeringFields);

  $('#skademelding').bootstrapValidator({
    message: 'This value is not valid',
    feedbackIcons: {
      valid: 'glyphicon glyphicon-ok',
      invalid: 'glyphicon glyphicon-remove',
      validating: 'glyphicon glyphicon-refresh'
    },
    submitHandler: function(validator, form, submitButton) {
    },
    fields: validationFields
  });

  $('.datePicker')
          .on('dp.change dp.show', function(e) {
            var name = $(e.target).find('input').attr('name');
            // Validate the date when user change it
            $('#skademelding')
              // Get the bootstrapValidator instance
                    .data('bootstrapValidator')
              // Mark the field as not validated, so it'll be re-validated when the user change date
                    .updateStatus(name, 'NOT_VALIDATED', null)
              // Validate the field
                    .validateField(name);
          });


  if($('#omTapet').hasClass('active')){
    $('#backButton').hide();
  }

  $('#oppsummering ul').each(function(index){
    $(this).find('li:gt(2)').hide();
    $(this).find('.showMore').show();
    showMore(this,2);
  });

  $('.add-btn').click(function(event){
    addTableRow(this);
  });

  $(".nextButton").click(function(event){
    validateFieldsMobile(event);
  });

  $('.backButton').click(function(){
    var currentActive = $('.panel-collapse.collapse.in');
    var nextActive = $(currentActive).parent().prev().find('div.panel-collapse');
    setActiveMobile(currentActive, nextActive);
  })

  //Navigates to next panel if completed/current and validates the current panel
  function navigateTo(next){
    if(stepPanel(next).hasClass('completed') || stepPanel(next).hasClass('current')){
      var currentActive = $('.stepPanel.active');
      if(stepPanel(currentActive).hasClass('completed')){
        if(validateForm($('#skademelding'))){
          setActive(next);
        }else{
          $('html, body').animate({
            scrollTop: $('div.has-error:first').offset().top-100
          }, 1000);
        }
      }else{
        setActive(next);
      }
    }
  }

  $('a.accordion').click(function(){
    var currentActive = $('.panel-collapse.collapse.in');
    var nextActive = $(this).closest('div').next();
    if(nextActive.hasClass('completed') || nextActive.hasClass('current')){
      if(currentActive.hasClass('completed')){
        if(validateForm($('#skademelding'))){
          setActiveMobile(currentActive, nextActive);
        }else{
          $('html, body').animate({
            scrollTop: $('div.has-error:first').offset().top-100
          }, 1000);
        }
      }else{
        setActiveMobile(currentActive, nextActive);
      }
    }

    if($(this).closest('div').next().attr('id') == "omTapet"){
      $(this).closest('div').next().collapse('toggle');
    }

  });

  $('#accordion').on('show.bs.collapse', function (event) {
    $(event.target).prev().find('span:first').next().toggleClass('glyphicon-chevron-down glyphicon-chevron-up')
  });

  $('#accordion').on('hide.bs.collapse', function () {
    $('.panel-collapse.collapse.in').prev().find('span:first').next().toggleClass('glyphicon-chevron-down glyphicon-chevron-up')
  });


  registerUploadHandlers();


});


function registerUploadHandlers(){
  $('#taptGjenstand').on('change','#receiptFile' , uploadHandler);
  $('#taptGjenstand').on('change','#repairFile' , uploadHandler);
  $('#omReisen').on('change','#confirmWorkFile' , uploadHandler);
}

function uploadHandler(event){
  var listString = '<span class="list-group-item" href="#"><a>'+event.target.files[0].name+'</a><a onclick="$(this).parent().remove();" class="glyphicon glyphicon-remove pull-right"> Fjern</span></a></span>';
  switch(event.target.getAttribute('id')){
    case 'receiptFile':
      $('#receiptItemUpload').append(listString);
      break;
    case 'repairFile':
      $('#repairItemUpload').append(listString);
      break;
    case 'confirmWorkFile':
      $('#confirmWorkUpload').append(listString);
      break;
  }
}
function clearInput(selector){
  $(':input',selector)
          .not(':button, :submit, :reset, :hidden')
          .val('')
          .removeAttr('checked')
          .removeAttr('selected');
}

function fillOutPerson(){
  var birthNumber = $('input[name=birthNumber]').val();
  var firstName = $('input[name=firstNamePerson]').val();
  var lastName = $('input[name=lastNamePerson]').val();
  $('#birthNumberTable').val(birthNumber);
  $('#firstNameTable').val(firstName);
  $('#lastNameTable').val(lastName);
}


function showMore(selector,hideIndex){

  var showMore = $(selector).find('.showMore');

  showMore.click(function() {
    if(showMore.hasClass('open')){
      $(selector).find('li:gt('+hideIndex+')').hide();
      showMore.show();
    }else{
      $(selector).find('li:gt('+hideIndex+')').show();
    }
    showMore.toggleClass('open');
  });
}



function setActiveMobile(currentActive, nextActive){
  if(currentActive.attr('id') != nextActive.attr('id')){
    $(currentActive).collapse('hide');
    $(nextActive).collapse('show');
    if(nextActive.attr('id') == 'oppsummering'){
      nextActive.find('.submitButton').text('Send inn');
    }
   // nextActive.prev().find('span:first').next().toggleClass('glyphicon-chevron-down glyphicon-chevron-up');
  }else{
    $(currentActive).collapse('toggle');
    //nextActive.prev().find('span:first').next().toggleClass('glyphicon-chevron-down glyphicon-chevron-up');
  }
}

function validateFieldsMobile(event){
  event.preventDefault();
  var currentActive = $('.panel-collapse.collapse.in');
  var nextActive = $(currentActive).parent().next().find('div.panel-collapse');
  if(currentActive.attr('id')=='taptGjenstand'){
    if($('#taptGjenstand tr').length > 0){
      navigateToNext(currentActive, nextActive);
    }
  }else{
    if(validateForm($('#skademelding'))){
      navigateToNext(currentActive, nextActive);
    }else{
      $('html, body').animate({
        scrollTop: $('div.has-error:first').offset().top-100
      }, 1000);
    }
  }
}

function validateForm(form){
  var bsValidator = form.data('bootstrapValidator');
  bsValidator.validate();
  return bsValidator.isValid();
}


function navigateToNext(currentActive, nextActive){
  $(currentActive).addClass('completed').removeClass('current');
  $('.panel-collapse.collapse.in').parent().find('span.circle-check').show();
  nextActive.addClass('current');
  setActiveMobile(currentActive, nextActive);
}

function populateSummary(){

  var inputs = $('#skademelding :input');

  inputs.each(function(index){
    var element = $(this);

    if(element.attr('type') == "radio" && !element.is(':checked')){
      return;
    }

    var value = element.val();
    $('#'+element.attr("name")).text(value);

    //Set the email on "kvittering" panel
    if(element.attr('name') == "emailPerson" ){
      $('#confirmEmail').text(value);
    }
  });

  var lostItemListMarkup = "";
  var lostItemNode =  $('#summaryTaptGjenstand');
  if(lostItemNode.find('li').length == 0){
    $("#lostItemTable tbody tr").each(function(){
      var items = $(this).find('td');
      lostItemListMarkup += '<li class="list-group-item">Type Gjenstand <span class="pull-right">'+$(items[0]).text()+'</span></li>';
      lostItemListMarkup += '<li class="list-group-item"><ul><li class="list-group-item">'+$(items[1]).text()+'</li></ul></li>';
    });
    lostItemListMarkup += '<li class="list-group-item showMore stbcolor-gray third"><a><span class="glyphicon glyphicon-chevron-down"></span> Vis flere detaljer</a></li>';
    lostItemNode.append(lostItemListMarkup);
    lostItemNode.find('li:gt(2)').hide();
    lostItemNode.find('.showMore').show();
    showMore(lostItemNode,2);
  }


}

//Adding row to table. Needs to be refactored/removed when implementing in Angular
function addTableRow(selector){

  var tableNode =  $(selector).siblings("table:first");
  if(!tableNode.attr('id')){
    tableNode = $(selector).parent().siblings("table:first");
  }
  var tableId = tableNode.attr('id');
  var rowId = $(selector).attr('rowid');
  var rowContent = "";

  if(tableId == "familyTable"){
    var birthNumb = $('#birthNumberTable').val();
    var firstName = $('#firstNameTable').val();
    var lastName = $('#lastNameTable').val();
    var who = $('input[name=personAffected]:checked').val() == "Andre" ? $('input[name=who]:checked').next('label').text() : "Anmelder";
    if(birthNumb && firstName && lastName && who){
      rowContent += '<td cellId="lastNameTable">'+lastName+'</td>';
      rowContent += '<td cellId="firstNameTable">'+firstName+'</td>';
      rowContent += '<td cellId="who" class="text-right">'+who+'</td>';
      rowContent += '<td cellId="birthNumberTable" class="text-right">'+birthNumb+'</td>';
      rowContent += '<td class="text-right"><a onclick="$(this).closest(\'tr\').remove();"><span class="stb-sprite-16 x"></span> Fjern</a></td>';
      rowContent += '<td class="text-right"><a onclick="populateFields(this);"><span class="stb-sprite-16 pencil"></span> Endre</a></td>';
      clearInput('#affectedPersons');
    }
  }else if(tableId == "lostItemTable"){
    rowContent += '<td cellId="lostItemType">'+ $('#lostItemType').val();+'</td>';
    rowContent += '<td cellId="receiptItemUpload" class="text-right">'+$('#receiptItemUpload a:first').text()+'</td>';
    rowContent += '<td class="text-right"><a onclick="$(this).closest(\'tr\').remove();"><span class="stb-sprite-16 x"></span> Fjern</a></td>';
    rowContent += '<td class="text-right"><a onclick="populateFields(this);"><span class="stb-sprite-16 pencil"></span> Endre</a></td>';
    rowContent += '<td cellId="lostItemAge"  class="text-right" style="display: none;">'+$('#lostItemAge').val()+'</td>';
    rowContent += '<td cellId="purchasedWhere" class="text-right" style="display: none;">'+$('#purchasedWhere').val()+'</td>';
    rowContent += '<td cellId="itemNew" class="text-right" style="display: none;">'+$('input[name=itemNew]:checked').val()+'</td>';
    rowContent += '<td cellId="itemRepairable" class="text-right" style="display: none;">'+$('input[name=itemRepairable]:checked').val()+'</td>';
    clearInput('#taptGjenstand');
    $('#skademelding').data('bootstrapValidator').resetForm();
  }else{
    var damDescr = $('#damageDescription').val();
    var insComp = $('#insuranceCompany').val();
    if(damDescr && insComp){
      rowContent += '<td cellId="damageDescription">'+damDescr+'</td>';
      rowContent += '<td cellId="insuranceCompany" class="text-right">'+insComp+'</td>';
      rowContent += '<td class="text-right"><a onclick="$(this).closest(\'tr\').remove();"><span class="stb-sprite-16 x"></span> Fjern</a></td>';
      rowContent += '<td class="text-right"><a onclick="populateFields(this);"><span class="stb-sprite-16 pencil"></span> Endre</a></td>';
      clearInput('#insurancePayment');
    }
  }

  //Adding or updating row
  if(!rowId){
    rowId = $('#'+tableId+' tbody tr').length + 1;
    $('#'+tableId + ' > tbody:last').append('<tr rowId='+rowId+'>'+rowContent+'</tr>');
  }else{
    tableNode.find('tr[rowId="'+rowId+'"]').html(rowContent);
    hideUpdateContainer(tableNode.siblings('div.updateContainer'));
  }
}


function updateFields(row){
  $(row).closest('tr').find('td').each(function(index){
    var cell = $(this).attr('cellId')
    if(cell){
      var cellValue = $(this).text();
      $('#'+cell).val(cellValue);
      $('input[name="'+cell+'"][value="'+cellValue+'"]').prop('checked', true);
    }
  });
  var updateContainer = $(row).closest('table').siblings('div.updateContainer');
  updateContainer.find('a.update-btn').attr('rowid', $(row).closest('tr').attr('rowId'));
  showUpdateContainer(updateContainer)
}

function showUpdateContainer(updateContainer){
  updateContainer.show();
  updateContainer.siblings('a.add-btn').hide();
}

function hideUpdateContainer(updateContainer){
  updateContainer.hide();
  updateContainer.siblings('a.add-btn').show();
}

/*
 $(window).resize (function (){
 console.log($(this).scrollTop())

 });
 */

setTimeout(function() {
  $('.row').each(function() {
    var rowheight = $(this).height();
    $(this).find('.stb-box').each(function() {
      $(this).css({"height": rowheight });
    })
  })
}, 10);

$(document).ready (function (){
  $('#nav').affix({
    offset: {
      top: $('header').height()
    }
  });
});

// Hiding/showing menubar depending on last scroll activity
var lastScrollTop = 0;
$(window).scroll(function(event){
  var st = $(this).scrollTop();
  if (st > lastScrollTop & st > 150){
    //removing .navfixed when user scroll down
    $('#nav').fadeOut(200);
  } else {
    //adding .navfixed when user scroll down
    $('#nav').fadeIn(200);
  }
  lastScrollTop = st;
});

</script>

<script>



</script>
<!-- /Slutt på opplegg for sticky toppmeny -->

</head>
<body>
<div id="nav">
  <div class="navbar navbar-default" role="navigation" style="border-bottom:solid; border-color:#DA291C; background:#E7E7E7">
    <div class="container">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="stb-sprite-32 square-list"></span>
      </a>
      <div class="navbar-collapse collapse" id="main-navbar">
        <ul class="nav navbar-nav">
          <li><img src="images/logo.storebrand.172x21.png" alt="Logo - Storebrand - Pensjon, enkelt og greit." style="width:150px; margin-top: 15px; margin-right: 10px;"/></li>
          <li class="active"><a href="#">Bank</a></li>
          <li class="divider"></li>
          <li><a href="#">Fond</a></li>
          <li class="divider"></li>
          <li><a href="#">Sparing</a></li>
          <li class="divider"></li>
          <li><a href="#" style="color:red">Forsikring</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tjenester <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#">Kalkulatorer</a></li>
              <li><a href="#">Alle vare tjenester</a></li>
              <li><a href="#">Fordel</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Forsikringer</li>
              <li><a href="#">Finn ditt behov</a></li>
              <li><a href="#">Finn forsikring</a></li>
            </ul>
          </li>
          <li><a href="#" onclick="$('#sidebar').slideToggle(); return false">Mer</a></li>
          <li><a href="#" onclick="$('.stbhead').slideToggle(); return false">Topp</a></li>
        </ul>
        <ul class="nav pull-right navbar-nav">
          <li>
            <form class="navbar-form">
              <input type="text" class="form-control" placeholder="S&oslash;k i sidene">
              <button type="submit" class="btn btn-default stbcolor-secondary third"><i class="glyphicon glyphicon-search"></i></button>
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div><!-- /.navbar -->
</div>

<div id="mobile" class="container">
<div class="row" style="margin-top: 96px;">
</div>
<form id="skademelding" class="validateForm" role="form">

<div class="panel-group" id="accordion">
<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a class="accordion" data-toggle="collapse" data-parent="#accordion">
        <span class="stb-sprite-16 circle-check" style="display: none;"></span> 1. Om skaden
        <span class="glyphicon glyphicon-chevron-up pull-right"></span>
      </a>

    </h4>
  </div>
  <div id="omTapet" class="panel-collapse collapse in">
    <div class="panel-body">
      <section>
        <div class="row">
          <div class="col-xs-12">
            <h3>Hva har skjedd?</h3>

            <label>Hva har skjedd med gjenstanden(e)</label>
            <div class="stb-form-group al checkbox">
              <span class="help-block info-message"></span>
              <input type="radio" name="loss" id="lossYes" value="Stjålet" class="stb-radio"><label class="stb-custom-input" for="lossYes">Stjålet</label>
              <input type="radio" name="loss" id="lossNo" value="Skader" class="stb-radio" ><label class="stb-custom-input" for="lossNo">Skadet</label>
            </div>

            <label>Når ble gjenstanden(e) skadet?</label>
            <div class="stb-form-group al">
              <span class="help-block info-message"></span>
              <div class='input-group date datePicker stb-input-group-lg' data-date-format="DD.MM.YYYY">
                <input type='text' class="form-control" name="dateWhen"/>
                <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
              </div>
            </div>

            <label>I hvilket land skjedde skaden?</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="1" class="form-control" name="lostCountry"></textarea>
            </div>

            <label>På hvilket sted skjedde skaden?</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="1" class="form-control" name="lostPlace"></textarea>
            </div>

            <hr>

            <h3>Hvordan skjedde det?</h3>
            <label>På hvilken måte tror du tapet kan ha skjedd?</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="4" class="form-control" name="lostHow"></textarea>
            </div>


            <label>Hvor oppholdt du deg da tapet skjedde? Og hvilke aktiviteter ble utført?</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="4" class="form-control" name="lostActivities"></textarea>
            </div>

            <label>La du merke til en spesiell hendelse som kan ha noe med tapet å gjøre?</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="4" class="form-control" name="lostEvents" ></textarea>
            </div>

            <label>Var det utenforstående vitne(r) til hendelsen?</label>
            <div class="stb-form-group al checkbox">
              <span class="help-block info-message"></span>
              <input type="radio" name="lossWitness" id="lossWitnessYes"  value="Yes" class="stb-radio"><label for="lossWitnessYes"class="stb-custom-input">Ja</label>
              <input type="radio" name="lossWitness" id="lossWitnessNo" value="No" class="stb-radio" ><label for="lossWitnessNo" class="stb-custom-input">Nei</label>
            </div>

            <hr>

            <h3>Annet</h3>
            <label>Hvor og hvordan var gjenstanden(e) oppbevart?</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="4" class="form-control" name="safeKeeping"></textarea>
            </div>


            <label>Andre opplysninger om skaden?</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="4" class="form-control" name="otherInfo"></textarea>
            </div>

          </div>
        </div>
        <div class="row" style="margin-bottom: 12px;">
          <div class="col-xs-5">
            <button type="submit" class="stb-btn stb-btn-lg submitButton navButton nextButton">Neste</button>
          </div>
        </div>
        <a class="stb-btn stb-btn-lg secondary cancel-btn" onclick="cancelSubmitForm()"><span class="glyphicon glyphicon-remove"></span> Avbryt skjemautfylling</a>
        <a class="stb-btn stb-btn-lg secondary cancel-btn"><span class="glyphicon glyphicon-repeat"></span > Fullfør skjema seinere?</a>
      </section>
    </div>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a class="accordion" data-toggle="collapse" data-parent="#accordion">
        <span class="stb-sprite-16 circle-check" style="display: none;"></span> 2. Tapt Gjenstand
        <span class="glyphicon glyphicon-chevron-down pull-right"></span>
      </a>
    </h4>
  </div>
  <div id="taptGjenstand" class="panel-collapse collapse">
    <div class="panel-body">
      <section>
        <div class="row">
          <div class="col-xs-12">
            <h3>Legg til gjenstanden(e)</h3>

            <label>Type gjenstand</label>
            <div class="stb-form-group al input-group stb-input-group-lg">
              <span class="help-block info-message"></span>
              <input id="lostItemType" type='text' class="form-control" name="lostItemType" placeholder="Merke og modell" />
            </div>

            <label> Hvor gammel er gjenstanden?</label>
            <div class="stb-form-group al select">
              <span class="help-block info-message"></span>
              <select class="form-control" name="howOld">
                <option value=""></option>
                <option value="1">1 år</option>
                <option value="2">2 år</option>
                <option value="3">3 år</option>
                <option value="4">4 år</option>
                <option value="5">5 år</option>
                <option value="6">6 år</option>
                <option value="7">7 år</option>
                <option value="8">8 år</option>
                <option value="9">9 år</option>
                <option value="10">10 år</option>
                <option value="11">11 år</option>
                <option value="12">12 år</option>
                <option value="13">13 år</option>
                <option value="14">14 år</option>
                <option value="15">15 år</option>
              </select>
            </div>

            <label>Hvor ble gjenstanden kjøpt?</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="4" class="form-control" name="purchasedWhere"></textarea>
            </div>

            <label>Var gjenstanden ny ved anskaffelse?</label>
            <div class="stb-form-group al checkbox">
              <span class="help-block info-message"></span>
              <input type="radio" name="itemNew" id="itemNewYes" value="Yes" class="stb-radio"><label class="stb-custom-input" for="itemNewYes">Ja</label>
              <input type="radio" name="itemNew" id="itemNewNo" value="No" class="stb-radio" ><label class="stb-custom-input" for="itemNewNo">Nei</label>
            </div>

            <label>Kan gjenstanden repareres?</label>
            <div class="stb-form-group al checkbox">
              <span class="help-block info-message"></span>
              <input type="radio" name="itemRepairable" id="itemRepairableYes" value="Yes" class="stb-radio"><label class="stb-custom-input" for="itemRepairableYes">Ja</label>
              <input type="radio" name="itemRepairable" id="itemRepairableNo" value="No" class="stb-radio" ><label class="stb-custom-input" for="itemRepairableNo">Nei</label>
            </div>
            <div id="repairItem" class="well" style="display: none;">
              <p class="petit">Last opp bevis som inneholder informasjon om gjenstanden kan repareres eller ikke,
                og evt. reparasjonskonstnad. Fåes der du kjøpte varen, eller av de som skal reparere skaden.</p>
              <div id="repairItemUpload"  class="list-group">

              </div>
              <div class="hiddenfile">
                <input name="upload" type="file" id="repairFile"/>hello
              </div>
              <a class="stb-btn secondary" onclick="$('#repairFile').trigger('click');"><span class="glyphicon glyphicon-plus" style="margin-top:6px;" ></span> Last opp</a>
            </div>

            <label>Kvittering</label>
            <p class="petit">Har du kvittering på gjenstanden, eller annet bevis på kjøpet (avbetaligngskontrakt, garanti e.l.)?</p>
            <div id="receiptItemUpload" class="list-group">
            </div>
            <div class="hiddenfile">
              <input name="upload" type="file" id="receiptFile"/>
            </div>
            <a class="stb-btn secondary" onclick="$('#receiptFile').trigger('click');"><span class="glyphicon glyphicon-plus" style="margin-top:6px;"></span> Last opp</a>
            <br>

            <a id="taptGjenstandButton" class="stb-btn stb-btn-lg secondary add-btn">Legg til</a>
            <div class="updateContainer" style="display: none">
              <a class="stb-btn stb-btn-lg secondary update-btn" rowid="x" >Oppdater</a>
              <a class="stb-btn stb-btn-lg secondary cancel-btn" onclick="hideUpdateContainer($(this).parent()); clearInput('#taptGjenstand');"><span class="glyphicon glyphicon-remove"></span> Avbryt</a>
            </div>
            <h3>Gjenstander lagt til</h3>
            <hr>
            <table id="lostItemTable" class="stb-table [hoverable]">
              <thead>
              <tr>
                <th style="width: 30%">Gjenstand</th>
                <th style="width: 50%" class="text-right">Vedlagt dokument</th>
                <th class="text-right"></th>
                <th class="text-right"></th>
              </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row" style="margin-bottom: 12px;">
          <div class="col-xs-5">
            <a class="stb-btn stb-btn-lg secondary pull-left backButton transparent-btn">Tilbake</a>
          </div>
          <div class="col-xs-5 col-xs-offset-1">
            <button type="submit" class="stb-btn stb-btn-lg submitButton navButton nextButton">Neste</button>
          </div>

        </div>
        <a class="stb-btn stb-btn-lg secondary cancel-btn" onclick="cancelSubmitForm()"><span class="glyphicon glyphicon-remove"></span> Avbryt skjemautfylling</a>
        <a class="stb-btn stb-btn-lg secondary cancel-btn"><span class="glyphicon glyphicon-repeat"></span > Fullfør skjema seinere?</a>
      </section>
    </div>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a class="accordion" data-toggle="collapse" data-parent="#accordion">
        <span class="stb-sprite-16 circle-check" style="display: none;"></span> 3. Om reisen
        <span class="glyphicon glyphicon-chevron-down pull-right"></span>
      </a>
    </h4>
  </div>
  <div id="omReisen" class="panel-collapse collapse">
    <div class="panel-body">
      <section>
        <div class="row">
          <div class="col-xs-12">
            <h3>Detaljer om reisen</h3>

            <div class="stb-form-group">
              <label>Hva er hensikten med reisen?</label><br>
              <input type="radio" name="travel" id="travelLeisure" value="Leisure" class="stb-radio travel" checked="checked"><label for="travelLeisure" class="stb-custom-input">Fritid</label>
              <input type="radio" name="travel" id="travelBusiness" value="Business" class="stb-radio travel"><label for="travelBusiness" class="stb-custom-input">Forretning</label>
            </div>

            <div id="travelBusinessForm" style="display:none;">
              <div class="well">
                <label>Bekreftelse fra arbeidsgiver</label>
                <p class="petit">Har du bekreftelse fra arbeidsgiver? Last den opp her.</p>
                <div id="confirmWorkUpload" class="list-group">

                </div>
                <div class="hiddenfile">
                  <input name="upload" type="file" id="confirmWorkFile"/>hello
                </div>
                <a class="stb-btn secondary" onclick="$('#confirmWorkFile').trigger('click');"><span class="glyphicon glyphicon-plus" style="margin-top:6px;"></span> Last opp</a>
              </div>
            </div>

            <label>Utreisedato fra fast bostedsadresse</label>
            <div class="stb-form-group al">
              <span class="help-block info-message"></span>
              <div class='input-group date datePicker' data-date-format="DD.MM.YYYY">
                <input type='text' class="form-control" name="dateTravelTo"/>
                <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
              </div>
            </div>

            <label>Hjemreisedato til fast bostedsadresse?</label>
            <div class="stb-form-group al">
              <span class="help-block info-message"></span>
              <div class='input-group date datePicker' data-date-format="DD.MM.YYYY">
                <input type='text' class="form-control" name="dateTravelFrom"/>
                <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
              </div>
            </div>

            <label>Oppgi arrangørens navn ved charterreiser, eller navn på flyselskap</label>
            <div class="stb-form-group al text-area">
              <span class="help-block info-message"></span>
              <textarea cols="40" rows="1" class="form-control" name="organizator"></textarea>
            </div>
            <hr>

            <label>Har du betalt reisen med et kort som inkluderer reiseforsikring?</label>
            <div class="stb-form-group al checkbox">
              <span class="help-block info-message"></span>
              <input type="radio" name="creditInsurance" id="creditInsuranceYes" value="Yes" class="stb-radio"><label for="creditInsuranceYes" class="stb-custom-input">Ja</label>
              <input type="radio" name="creditInsurance" id="creditInsuranceNo" value="No" class="stb-radio" ><label for="creditInsuranceNo" class="stb-custom-input">Nei</label>
            </div>

            <div id="creditInsuranceInfo" class="well" style="display: none;">

              <label>Kortholderens navn</label>
              <div class="stb-form-group al input-group">
                <span class="help-block info-message"></span>
                <input type='text' class="form-control" name="cardOwner" placeholder="Fornavn og etternavn" />
              </div>

              <label>Kortnummer</label>
              <div class="stb-form-group al input-group">
                <span class="help-block info-message"></span>
                <input type='text' class="form-control" name="cardNumber" placeholder="16 siffer"/>
              </div>

              <label>Er skaden meldt til dette selskapet? </label>
              <div class="stb-form-group al checkbox">
                <span class="help-block info-message"></span>
                <input type="radio" name="damageReport" id="damageReportYes" value="Yes" class="stb-radio"><label for="damageReportYes" class="stb-custom-input">Ja</label>
                <input type="radio" name="damageReport" id="damageReportNo" value="No" class="stb-radio" ><label for="damageReportNo" class="stb-custom-input">Nei</label>
              </div>

              <label>Har du motatt erstatning? Hvor mye?</label>
              <div class="stb-form-group al text-area">
                <span class="help-block info-message"></span>
                <textarea cols="40" rows="4" class="form-control" name="refund"></textarea>
              </div>

            </div>

            <label>Har du tidligere (siste 3 år) hatt skader som har medført forsikringsutbetaling?</label>
            <div class="stb-form-group al checkbox">
              <span class="help-block info-message"></span>
              <input type="radio" name="damagesLately" id="damagesLatelyYes" value="Yes" class="stb-radio"><label for="damagesLatelyYes" class="stb-custom-input">Ja</label>
              <input type="radio" name="damagesLately" id="damagesLatelyNo" value="No" class="stb-radio" ><label for="damagesLatelyNo" class="stb-custom-input">Nei</label>
            </div>

            <div id="insurancePayment" class="well" style="display: none;">

              <label>Beskriv tidligere tap/skade og erstatningen av den</label>
              <div class="stb-form-group al text-area">
                <span class="help-block info-message"></span>
                <textarea id="damageDescription" cols="40" rows="4" class="form-control" name="damageDescription"></textarea>
              </div>

              <label>Ditt forsikringsselskap ved tapet/skaden</label>
              <div class="stb-form-group al text-area">
                <span class="help-block info-message"></span>
                <textarea id="insuranceCompany"  cols="40" rows="1" class="form-control" name="insuranceCompany"></textarea>
              </div>

              <a id="insurancePaymentButton" class="stb-btn stb-btn-lg secondary pull-left add-btn" style="">Legg til</a>
              <div class="updateContainer" style="display: none" >
                <a class="stb-btn stb-btn-lg secondary update-btn" rowid="x" >Oppdater</a>
                <a class="stb-btn stb-btn-lg secondary cancel-btn" onclick="hideUpdateContainer($(this).parent()); clearInput('#insurancePayment');"><span class="glyphicon glyphicon-remove"></span> Avbryt</a>
              </div>
              <table id="insuranceTable" class="stb-table [hoverable]">
                <thead>
                <tr>
                  <th style="width: 40%">T. skade</th>
                  <th style="width: 40%" class="text-right">F.Selskap</th>
                  <th class="text-right"></th>
                  <th class="text-right"></th>
                </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="row" style="margin-bottom: 12px;">
          <div class="col-xs-5">
            <a class="stb-btn stb-btn-lg secondary pull-left backButton transparent-btn">Tilbake</a>
          </div>
          <div class="col-xs-5 col-xs-offset-1">
            <button type="submit" class="stb-btn stb-btn-lg submitButton navButton nextButton">Neste</button>
          </div>

        </div>
        <a class="stb-btn stb-btn-lg secondary cancel-btn" onclick="cancelSubmitForm()"><span class="glyphicon glyphicon-remove"></span> Avbryt skjemautfylling</a>
        <a class="stb-btn stb-btn-lg secondary cancel-btn"><span class="glyphicon glyphicon-repeat"></span > Fullfør skjema seinere?</a>
      </section>
    </div>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a class="accordion" data-toggle="collapse" data-parent="#accordion">
        <span class="stb-sprite-16 circle-check" style="display: none;"></span> 4. Personopplysninger
        <span class="glyphicon glyphicon-chevron-down pull-right"></span>
      </a>
    </h4>
  </div>
  <div id="personOpplysninger" class="panel-collapse collapse">
    <div class="panel-body">
      <section>
        <div class="row">
          <div class="col-xs-12">
            <h3>Hvem står forikringen på?</h3>

            <label>Fødselsnummer</label>
            <div class="stb-form-group al input-group">
              <span class="help-block info-message"></span>
              <input type='text' class="form-control" name="birthNumber" placeholder="11 siffer" />
            </div>

            <label>Fornavn</label>
            <div class="stb-form-group al input-group stb-input-group-md">
              <span class="help-block info-message"></span>
              <input type='text' class="form-control" name="firstNamePerson"/>
            </div>

            <label>Etternavn</label>
            <div class="stb-form-group al input-group stb-input-group-md">
              <span class="help-block info-message"></span>
              <input type='text' class="form-control" name="lastNamePerson"/>
            </div>

            <label>E-post</label>
            <div class="stb-form-group al input-group stb-input-group-md">
              <span class="help-block info-message"></span>
              <input type='email' class="form-control" name="emailPerson"/>
            </div>

            <label>Gjenta e-post</label>
            <div class="stb-form-group al input-group stb-input-group-md">
              <span class="help-block info-message"></span>
              <input type='email' class="form-control" name="reEmailPerson" />
            </div>

            <label>Telefon</label>
            <div class="stb-form-group al input-group stb-input-group-md">
              <span class="help-block info-message"></span>
              <input type='text' class="form-control" name="telephonePerson" />
            </div>

            <label>Kontonummer</label>
            <div class="stb-form-group al input-group stb-input-group-md">
              <span class="help-block info-message"></span>
              <input type='text' class="form-control" name="bankAccount" placeholder="11 siffer" />
            </div>

            <label>Polisenummer<span class="petit"> (valgfritt)</span></label>
            <div class="stb-form-group al input-group">
              <span class="help-block info-message"></span>
              <input type='text' class="form-control" placeholder="7 siffer" />
            </div>

            <hr>
            <h3>Hvem var utstatt for hendelsen?</h3>

            <label>Oppgi de som opplevde å få gjenstanden(e) skadet</label>
            <div class="stb-form-group al checkbox">
              <span class="help-block info-message"></span>
              <input type="radio" id="yourself" value="Yourself" name="personAffected" onclick="fillOutPerson();$('#affectedPerson').hide();" class="stb-radio"><label for="yourself" class="stb-custom-input">Du som melder fra om tyveriet</label>
              <input type="radio" id="andre" value="Andre" name="personAffected" onclick="$('#affectedPerson').show();" checked="checked" class="stb-radio" ><label for="andre" class="stb-custom-input">Andre</label>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <div id="affectedPersons" class="well">

              <label>Fødselsnummer</label>
              <div class="stb-form-group al input-group">
                <span class="help-block info-message"></span>
                <input id="birthNumberTable" type='text' class="form-control" name="birthNumberTable" placeholder="11 siffer" />
              </div>

              <label>Fornavn</label>
              <div class="stb-form-group al input-group stb-input-group-sm">
                <span class="help-block info-message"></span>
                <input id="firstNameTable" type='text' class="form-control" name="firstNameTable"/>
              </div>

              <label>Etternavn</label>
              <div class="stb-form-group al input-group stb-input-group-sm">
                <span class="help-block info-message"></span>
                <input id="lastNameTable" type='text' class="form-control" name="lastNameTable"/>
              </div>

              <div id="affectedPerson" >
                <label>Hvem er dette?</label>
                <div class="stb-form-group al checkbox">
                  <span class="help-block info-message"></span>
                  <input type="radio" id="partner" value="Ektefeller/samboer/partner" name="who" class="stb-radio"><label for="partner" class="stb-custom-input">Ektefeller/samboer/partner</label>
                  <input type="radio" id="barn" value="Barn" name="who" class="stb-radio"><label for="barn" class="stb-custom-input">Barn</label>
                  <input type="radio" id="andre2" value="Andre" name="who" class="stb-radio" ><label for="andre2" class="stb-custom-input">Andre</label>
                </div>
              </div>

              <a id="affectedPersonsButton" class="stb-btn stb-btn-lg secondary pull-left add-btn">Legg til</a>
              <div class="updateContainer" style="display: none" >
                <a class="stb-btn stb-btn-lg secondary update-btn" rowid="x" >Oppdater</a>
                <a class="stb-btn stb-btn-lg secondary cancel-btn" onclick="hideUpdateContainer($(this).parent()); clearInput('#affectedPersons');"><span class="glyphicon glyphicon-remove"></span> Avbryt</a>
              </div>
              <table id="familyTable" class="stb-table [hoverable]">
                <thead>
                <tr>
                  <th style="width: 30%">Navn</th>
                  <th style="width: 30%" class="text-right">Hvem</th>
                  <th style="width: 20%" class="text-right">P.nr</th>
                  <th class="text-right"></th>
                  <th class="text-right"></th>
                </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="row" style="margin-bottom: 12px;">
          <div class="col-xs-5">
            <a class="stb-btn stb-btn-lg secondary pull-left backButton transparent-btn">Tilbake</a>
          </div>
          <div class="col-xs-5 col-xs-offset-1">
            <button type="submit" class="stb-btn stb-btn-lg submitButton navButton nextButton">Neste</button>
          </div>

        </div>
        <a class="stb-btn stb-btn-lg secondary cancel-btn" onclick="cancelSubmitForm()"><span class="glyphicon glyphicon-remove"></span> Avbryt skjemautfylling</a>
        <a class="stb-btn stb-btn-lg secondary cancel-btn"><span class="glyphicon glyphicon-repeat"></span > Fullfør skjema seinere?</a>
      </section>
    </div>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a class="accordion" data-toggle="collapse" data-parent="#accordion">
        <span class="stb-sprite-16 circle-check" style="display: none;"></span> 5. Oppsummering
        <span class="glyphicon glyphicon-chevron-down pull-right"></span>
      </a>
    </h4>
  </div>
  <div id="oppsummering" class="panel-collapse collapse">
    <div class="panel-body">
      <section>

        <div class="row">
          <div class="col-xs-12">
            <h2>Oppsummering</h2>
            <hr>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-9">
            <h3>Personopplysninger</h3>
          </div>
          <div class="col-xs-3 summary">
            <a  onclick="setActive($('#personOpplysninger'))"><span class="stb-sprite-16 pencil"></span>Endre</a>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <ul class="list-group">
              <li class="list-group-item">Fødselsnummer <span id="birthNumber" class="pull-right"></span></li>
              <li class="list-group-item">Fornavn <span id="firstNamePerson" class="pull-right"></span></li>
              <li class="list-group-item">Etternavn <span id="lastNamePerson" class="pull-right"></span></li>
              <li class="list-group-item">Email <span id="emailPerson" class="pull-right"></span></li>
              <li class="list-group-item">Telefon <span id="telephonePerson" class="pull-right"></span></li>
              <li class="list-group-item">Kontonummer<span id="bankAccount" class="pull-right"></span></li>
              <li class="list-group-item">Polisenummer<span id="poliseNumber" class="pull-right"></span></li>
              <li class="list-group-item showMore stbcolor-gray third"><a><span class="glyphicon glyphicon-chevron-down"></span> Vis flere detaljer</a></li>
            </ul>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-9">
            <h3>Om skaden</h3>
          </div>
          <div class="col-xs-3 summary">
            <a onclick="setActive($('#omTapet')) "><span class="stb-sprite-16 pencil"></span>Endre</a>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <ul class="list-group omTapet">
              <li class="list-group-item">Hva har skjedd med gjenstanden(e)?<span id="loss" class="pull-right"></span></li>
              <li class="list-group-item">Når ble gjenstanden(e) skadet? <span id="dateWhen" class="pull-right"></span></li>
              <li class="list-group-item">I hvilket land skjedde skaden? <span id="lostCountry" class="pull-right"></span></li>
              <li class="list-group-item">På hvilket sted skjedde skaden? <span id="lostPlace" class="pull-right"></span></li>
              <li class="list-group-item">På hvilken måte tror du tapet kan ha skjedd? <span id="lostHow" class="pull-right"></span></li>
              <li class="list-group-item">Hvor oppholdt du deg da tapet skjedde? Og hvilke aktiviteter ble utført? <span id="lostActivities" class="pull-right"></span></li>
              <li class="list-group-item">La du merke til en spesiell hendelse som kan ha noe med tapet å gjøre? <span id="lostEvents" class="pull-right"></span></li>
              <li class="list-group-item">Var det utenforstående vitne(r) til hendelsen? <span id="lossWitness" class="pull-right"></span></li>
              <li class="list-group-item">Hvor og hvordan var gjenstanden(e) oppbevart?<span id="safeKeeping" class="pull-right"></span></li>
              <li class="list-group-item">Anbdre opplysninger om skaden?<span id="otherInfo" class="pull-right"></span></li>
              <li class="list-group-item showMore stbcolor-gray third"><a><span class="glyphicon glyphicon-chevron-down"></span> Vis flere detaljer</a></li>
            </ul>
            <hr>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-9">
            <h3>Tapt gjenstand</h3>
          </div>
          <div class="col-xs-3 summary">
            <a onclick="setActive($('#taptGjenstand')) "><span class="stb-sprite-16 pencil"></span>Endre</a>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <ul id="summaryTaptGjenstand" class="list-group">
            </ul>
            <hr>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-9">
            <h3>Om reisen</h3>
          </div>
          <div class="col-xs-3">
            <a onclick="setActive($('#omReisen'))"><span class="stb-sprite-16 pencil"></span>Endre</a>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-12">
            <ul class="list-group">
              <li class="list-group-item">Utreisedato fra fast bostedsadresse? <span id="dateTravelTo" class="pull-right"></span></li>
              <li class="list-group-item">Hjemreisedato fra fast bostedsadresse? <span id="dateTravelFrom" class="pull-right"></span></li>
              <li class="list-group-item">Oppgi arrangørens navn ved charterreiser, eller navn på flyselskap <span id="organizator" class="pull-right"></span></li>
              <li class="list-group-item">Har du betalt reisen med et kort som inkluderer reiseforsikring?<span id="creditInsurance" class="pull-right"></span></li>
              <li class="list-group-item">Har du tidligere (siste 3 år) hatt skader som har medført forsikringsutbetaling?<span id="damagesLately" class="pull-right"></span></li>
              <li class="list-group-item">Hvor gammel er gjenstanden?<span id="howOld" class="pull-right"></span></li>
              <li class="list-group-item showMore stbcolor-gray third"><a><span class="glyphicon glyphicon-chevron-down"></span> Vis flere detaljer</a></li>
            </ul>

            <div class="stb-form-group al checkbox">
              <p>Jeg bekrefter at alle opplysningene</p>
              <span class="help-block info-message"></span>
              <input class="stb-checkbox" id="confirmInfo" name="confirm" type="checkbox" />
              <label class="stb-custom-input" for="confirmInfo"> jeg har oppgitt er korrekte.</label><br>
              <p class="petit">
                Den som bevisst gir uriktige eller ufullstendige opplysninger i forbindelse med skadeoppgjør, kan tape enhver rett etter forsikringsavtalen.
                Skaden vil bli meldt til Forsikringsselskapenes sentrale skaderegister.
              </p>
            </div>

            <div class="stb-form-group al checkbox">
              <p>Jeg godtar at e-postadressen jeg har oppgitt benyttes</p>
              <span class="help-block info-message"></span>
              <input class="stb-checkbox" id="acceptEmail" name="acceptEmail" type="checkbox"  />
              <label for="acceptEmail">i videre dialog rundt skademeldingen.</label><br>
            </div>
          </div>
        </div>
        <div class="row" style="margin-bottom: 12px;">
          <div class="col-xs-5">
            <a class="stb-btn stb-btn-lg secondary pull-left backButton transparent-btn">Tilbake</a>
          </div>
          <div class="col-xs-5 col-xs-offset-1">
            <button type="submit" class="stb-btn stb-btn-lg submitButton navButton nextButton">Send inn!</button>
          </div>

        </div>
        <a class="stb-btn stb-btn-lg secondary cancel-btn" onclick="cancelSubmitForm()"><span class="glyphicon glyphicon-remove"></span> Avbryt skjemautfylling</a>
        <a class="stb-btn stb-btn-lg secondary cancel-btn"><span class="glyphicon glyphicon-repeat"></span > Fullfør skjema seinere?</a>
      </section>
    </div>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      <a class="accordion" data-toggle="collapse" data-parent="#accordion">
        6. Kvittering
      <span class="glyphicon glyphicon-chevron-down pull-right"></span>
      </a>
    </h4>
  </div>

  <div id="kvittering"  class="panel-collapse collapse">
    <div class="panel-body">
      <section>
        <div class="row">
          <div class="col-xs-12">
            <h2>Kvittering</h2>
            <hr>
            <div class="well">
              <p class="stb-color-secondary third intro"><span class="stb-sprite-32 circle-check"></span> Skademeldingen er motatt.</p>
              <h3>Hva skjer videre?</h3>
              <ul class="stb">
                <li>En bekreftelse av skademeldingen vil bli sendt til <span id="confirmEmail" class="stbcolor-secondary third"></span></li>
                <li>En av våre konsulenter går igjennom skademeldingen. Vi vil kontakte deg hvis det
                  er behov for ytterlige opplysninger.
                </li>
                <li>Du vil høre fra oss når saken er ferdig behandlet. Behandlingstiden er ca. 2 uker.
                  Noe lengre tid ved høysesong.
                </li>
                <li>Eventuell erstatning vil bli utbetalt når skaden er ferdig vurdert.</li>
              </ul>
              <hr style="margin-bottom: 12px;">
              <div class="row">
                <div class="col-xs-4">
                  <strong> Reisegods </strong>
                </div>
                <div class="col-xs-8">
                  Referansenummer: <br> - SKA-54321
                </div>

              </div>
              <hr style="margin-top: 12px">
            </div>

          </div>
        </div>

      </section>
    </div>
  </div>
</div>
</div>
</form>
</div>

<!-- Bunnmeny desktop-->
<div class="stbcolor-primary third navbar hidden-xs hidden-sm" style="border-top:solid; border-color:#DA291C;">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <ul class="nav navbar-nav">
          <li><a href="#">Om siden og personopplysninger</a></li>
          <li><a href="#">In english</a></li>
          <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">Sosiale medier <b class="caret"></b></a>
            <ul class="dropdown-menu" style="top:auto; bottom:100%;">
              <li><a href="#">Facebook</a></li>
              <li><a href="#">Twitter</a></li>
              <li><a href="#">Youtube</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Blogg</li>
              <li><a href="#">Penger og pensjon</a></li>
              <li><a href="#">Storebrand i sosiale medier</a></li>
            </ul>
          </li>
        </ul>

        <ul class="nav navbar-nav pull-right">
          <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">Om Storebrand <b class="caret"></b></a>
            <ul class="dropdown-menu" style="top:auto; bottom:100%;">
              <li><a href="#">Fakta om Storebrand</a></li>
              <li><a href="#">Investor relations</a></li>
              <li><a href="#">Jobb i Storebrand</a></li>
              <li><a href="#">Presse</a></li>
              <li><a href="#">Barekraft</a></li>
              <li><a href="#">Verneombudet</a></li>
            </ul>
          </li>
          <li><a href="#">Presse</a></li>
          <li><a href="#">Kontakt oss</a></li>
          <li><a onclick="$('body,html').animate({scrollTop: 0}, 800);return false;" href="#" class="bigWhite">Til toppen</a></li>
        </ul>


      </div>
    </div>
  </div>
</div>
<!-- /Bunnmeny -->

<div class="stbcolor-primary third navbar-fixed-bottom visible-xs visible-sm" style="border-top:solid; border-color:#DA291C;">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#"><b class="glyphicon glyphicon-align-justify"></b></a>
            <ul class="dropdown-menu" style="top:auto; bottom:100%;">
              <li><a href="#">Om siden og personopplysninger</a></li>
              <li><a href="#">In english</a></li>
              <li><a href="#">Fakta om Storebrand</a></li>
              <li><a href="#">Investor relations</a></li>
              <li><a href="#">Jobb i Storebrand</a></li>
              <li><a href="#">Presse</a></li>
              <li><a href="#">Barekraft</a></li>
              <li><a href="#">Verneombudet</a></li>
              <li>&nbsp;</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
</body>
</html>
