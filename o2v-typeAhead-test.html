<!doctype html>
<html>
  <head>
    <title>Storebrand.ny type-ahead example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/stb-main.css"> 
    <script type="text/javascript" src="js/dist/jquery.min.js"></script>
    <script type="text/javascript" src="js/dist/jquery-ui-1.10.3.datepicker.js"></script>
    <script type="text/javascript" src="js/dist/jquery.slider.all.js"></script>
    <script type="text/javascript" src="js/dist/custom-select-menu.jquery.js"></script>
    <script type="text/javascript" src="js/dist/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/dist/typeahead.bundle.min.js"></script>

<style>
.tt-dropdown-menu,
.gist {
  text-align: left;
}
      
.table-of-contents li {
  display: inline-block;
  *display: inline;
  zoom: 1;
}
    
.table-of-contents li a {
  font-size: 16px;
  color: #999;
}

/* site theme */
/* ---------- */

.typeahead,
.tt-query,
.tt-hint {
  width: 396px;
  padding: 8px 12px;
  font-size: 24px;
  line-height: 30px;
  border: 2px solid #ccc;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  outline: none;
}

.typeahead {
  background-color: #fff;
}

.typeahead:focus {
  border: 2px solid #0097cf;
}

.stb-btn.typeahead-btn{
  position: relative;
  top: 14px;
}

.tt-query {
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}

.tt-hint {
  color: #999
}

.tt-dropdown-menu {
  width: 422px;
  margin-top: 12px;
  padding: 8px 0;
  background-color: #fff;
  //background-color: #EFE8DF;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2);
  -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2);
  box-shadow: 0 5px 10px rgba(0,0,0,.2);
}

.tt-suggestion {
  padding: 3px 20px;
  font-size: 18px;
  line-height: 24px;
}

.tt-suggestion.tt-cursor {
  color: #fff;
  background-color: #F2F2F2;
}

#multiple-datasets .league-name {
  margin: 0 20px 5px 20px;
  padding: 3px 0;
  border-bottom: 1px solid #ccc;
}

.headline-search{
  padding-left: 10px;
  background-color: #CCCCCC;
  border-radius:5px; 
}

#searchHit{
  width:100px;
}

</style>

<script>
$(document).ready(function() {

  //Categorized json object
  var categoryData = {
                  "Fond" :
                          [
                                  {"name": "Fond","url" : "http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Fondslister","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Lær mer om fondsparing","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "<span class='glyphicon glyphicon-picture'></span> Bærekraft","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kjøp fond","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Våre anbefalte fond","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Delphi","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Storebrandfondene","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kontakt fond","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Start fondsparing","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Chat om fond","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"}
                                  ],
                  "Pensjon" :
                          [
                                  {"name": "<span class='glyphicon glyphicon-info-sign'></span> Lær om pensjon","url" : "http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Pensjonskalkulator","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kjøp pensjonssparing","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Hva er pensjonssparing","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Ditt pensjonstall","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Fripolise","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Pensjonsskolen","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Folketrygden","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Tjenestepensjon","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kontakt pensjon","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Start pensjonssparing","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Chat om pensjon","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Spar til din pensjon","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Mitt pensjonstall","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Tips til pensjon","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"}
                                  ],
                  "Bank" :
                          [
                                  {"name": "Banksparing","url" : "http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kort og kreditt","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Mistet kort","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Sperr kort","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Visakort","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kredittkort","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Bli kunde","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kontakt banken","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Priser og vilkår","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Dagens renter","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Søk boliglån","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Start Banksparing","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Chat om bank","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"}
                                  ],
                  "Forsikring" :
                          [
                                  {"name": "<span class='glyphicon glyphicon-wrench'></span> Meld skade","url" : "http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Bilforsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Helseforsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Hytteforsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Tips om forsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Mine behov","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Alt til bilen","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Alt til barnet","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Alt til huset","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kontakt forsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Chat om forsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Motorsykkelforsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Tilhengerforsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Uføreforsikring","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"}
                                  ],
                  "Minside" :
                          [
                                  {"name": "Betal regning","url" : "http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Min oversikt","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Mitt forbruk","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Efaktura","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Kort og kreditt","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Anders Losvik","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Bjørn Christian Tørrissen'","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Mine kontoer","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Mine innstillinger","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Søk lån","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Banksparing","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "Nettbank","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"},
                                  {"name": "<span class='glyphicon glyphicon-lock'></span> Sikker chat - logg inn","url":"http://www.storebrand.no/site/stb.nsf/Pages/forsideperson.html"}
                                  ]
   };


   //The category config object. The first object set some general parameters, such as limit.
   var categoryConfig = [{
     hint: true,
     highlight: true,
     minLength: 3,
     limit: 10
   }];

  //Loops through the category data and creates multiple datasets(per category) and puts it in the category config.
   $.each(categoryData, function(index) {

     //Make use of the Bloodhound suggestion engine in order to use json objects
     var category =  new Bloodhound({
       datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
       queryTokenizer: Bloodhound.tokenizers.whitespace,
       local: categoryData[index]
     });

     category.initialize();

     var catObj = {
       name : index,
       displayKey: 'name',
       source: category.ttAdapter(),
       templates: {
         header: '<h3 class="headline-search"><span class="glyphicon glyphicon-stats"></span>'+index+'</h3>'
       }
     }
     categoryConfig.push(catObj);
   });

  $.fn.typeahead.apply($('#the-basics .typeahead'), categoryConfig);
  //Calls the typeahead with the category config
  //$('#the-basics .typeahead').typeahead(categoryConfig[0], categoryConfig[1]);

  $('#the-basics .typeahead').bind('typeahead:selected', function(event,data) {
    window.location.href = data.url
    //$('#showTrailer').html('<h3>Her kan vi vise noe spesielt for valget ' + stripSpan($('#searchHit').val()) + '</h3>Og så kan vi vise Google-treffene under der igjen.');
  });

  $('#the-basics .typeahead').keypress(function (e) {
    if (e.which == 13) {
      alert("Search result page for: "+$(this).val());
    }
  });

  $('.stb-btn.typeahead-btn').click(function(){
    var searchVal =  $('#the-basics .tt-input').val();
    alert("Search result page for: "+searchVal);
  });
  
  $("#searchHit" ).bind({
    click: function() {
      $(this).css('width','300px');
    },
    blur: function() {
      $(this).css('width','100px');
      //$(this).val("");
    }
  });

});

function stripSpan(selectedTypeahead) {
  if (selectedTypeahead.indexOf("<span") > 0) {
    var startSpan = selectedTypeahead.indexOf("<span");
    var endSpan = selectedTypeahead.indexOf("</span>");
    return selectedTypeahead.substring(endSpan + 6, selectedTypeahead.length);
  } else {
    return selectedTypeahead;
  }
}

</script>

</head>

<body>

  <br />
  <hr>
  <br />
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h1>Typeahead simple</h1>
        <div id="the-basics" class="pull-right">
          <input class="typeahead" id="searchHit" type="text" placeholder="Søk">
          <button class="stb-btn typeahead-btn">Søk</button>
        </div>

      </div>
    </div>   
    <div class="row">
      <div class="col-md-12">       
        <div id="showTrailer"></div>
        <br />
        <hr>
        <br />
        <p>
          Ikoner fungerer ikke på treff. Må i så fall kun åpne url direkte</p>
      </div>
    </div>  
  </div>    
</body>
</html>
